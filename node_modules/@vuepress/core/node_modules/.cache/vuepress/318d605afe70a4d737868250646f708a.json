{"remainingRequest":"D:\\MyProduct\\blog\\node_modules\\babel-loader\\lib\\index.js??ref--3-1!D:\\MyProduct\\blog\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\MyProduct\\blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\MyProduct\\blog\\node_modules\\@vuepress\\theme-blog\\components\\Toc.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\MyProduct\\blog\\node_modules\\@vuepress\\theme-blog\\components\\Toc.vue","mtime":1580703995080},{"path":"D:\\MyProduct\\blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1580610012451},{"path":"D:\\MyProduct\\blog\\node_modules\\babel-loader\\lib\\index.js","mtime":1580610013425},{"path":"D:\\MyProduct\\blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1580610012451},{"path":"D:\\MyProduct\\blog\\node_modules\\vue-loader\\lib\\index.js","mtime":1580610017989}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LmFycmF5LmZpbmQtaW5kZXgiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgU3RpY2tlciBmcm9tICIuL1N0aWNrZXIudnVlIjsKdmFyIGluaXRUb3A7IC8vIGdldCBvZmZzZXQgdG9wCgpmdW5jdGlvbiBnZXRBYnNvbHV0ZVRvcChkb20pIHsKICByZXR1cm4gZG9tICYmIGRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QgPyBkb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgKyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIDogMDsKfQoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIFN0aWNrZXI6IFN0aWNrZXIKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhY3RpdmVJbmRleDogMAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICB2aXNpYmxlOiBmdW5jdGlvbiB2aXNpYmxlKCkgewogICAgICByZXR1cm4gdGhpcy4kZnJvbnRtYXR0ZXIgJiYgdGhpcy4kZnJvbnRtYXR0ZXIudG9jICE9PSBmYWxzZSAmJiAhISh0aGlzLiRwYWdlICYmIHRoaXMuJHBhZ2UuaGVhZGVycyAmJiB0aGlzLiRwYWdlLmhlYWRlcnMubGVuZ3RoKTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBhY3RpdmVJbmRleDogZnVuY3Rpb24gYWN0aXZlSW5kZXgoKSB7CiAgICAgIHZhciBpdGVtcyA9IHRoaXMuJHJlZnMuY2hhaXJUb2NJdGVtIHx8IFtdOwogICAgICB2YXIgZG9tID0gaXRlbXNbdGhpcy5hY3RpdmVJbmRleF07CiAgICAgIGlmICghZG9tKSByZXR1cm47CiAgICAgIHZhciByZWN0ID0gZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICB2YXIgd3JhcHBlclJlY3QgPSB0aGlzLiRlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgdmFyIHRvcCA9IHJlY3QudG9wIC0gd3JhcHBlclJlY3QudG9wOwoKICAgICAgaWYgKHRvcCA8IDIwKSB7CiAgICAgICAgdGhpcy4kZWwuc2Nyb2xsVG9wID0gdGhpcy4kZWwuc2Nyb2xsVG9wICsgdG9wIC0gMjA7CiAgICAgIH0gZWxzZSBpZiAodG9wICsgcmVjdC5oZWlnaHQgPiB3cmFwcGVyUmVjdC5oZWlnaHQpIHsKICAgICAgICB0aGlzLiRlbC5zY3JvbGxUb3AgKz0gcmVjdC50b3AgLSAod3JhcHBlclJlY3QuaGVpZ2h0IC0gcmVjdC5oZWlnaHQpOwogICAgICB9CiAgICB9LAogICAgJHJvdXRlOiBmdW5jdGlvbiAkcm91dGUoKSB7fQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgLy8gc3luYyB2aXNpYmxlIHRvIHBhcmVudCBjb21wb25lbnQKICAgIHZhciBzeW5jVmlzaWJsZSA9IGZ1bmN0aW9uIHN5bmNWaXNpYmxlKCkgewogICAgICBfdGhpcy4kZW1pdCgndmlzaWJsZS1jaGFuZ2UnLCBfdGhpcy52aXNpYmxlKTsKICAgIH07CgogICAgc3luY1Zpc2libGUoKTsKICAgIHRoaXMuJHdhdGNoKCd2aXNpYmxlJywgc3luY1Zpc2libGUpOyAvLyBiaW5kaW5nIGV2ZW50CgogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfdGhpcy50cmlnZ2VyRXZ0KCk7CiAgICB9LCAxMDAwKTsKCiAgICB0aGlzLl9vblNjcm9sbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF90aGlzLm9uU2Nyb2xsKCk7CiAgICB9OwoKICAgIHRoaXMuX29uSGFzaENoYW5nZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGhhc2ggPSBkZWNvZGVVUklDb21wb25lbnQobG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSkpOwogICAgICB2YXIgaW5kZXggPSAoX3RoaXMuJHBhZ2UuaGVhZGVycyB8fCBbXSkuZmluZEluZGV4KGZ1bmN0aW9uIChoKSB7CiAgICAgICAgcmV0dXJuIGguc2x1ZyA9PT0gaGFzaDsKICAgICAgfSk7CiAgICAgIGlmIChpbmRleCA+PSAwKSBfdGhpcy5hY3RpdmVJbmRleCA9IGluZGV4OwogICAgICB2YXIgZG9tID0gaGFzaCAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChoYXNoKTsKICAgICAgaWYgKGRvbSkgd2luZG93LnNjcm9sbFRvKDAsIGdldEFic29sdXRlVG9wKGRvbSkgLSAyMCk7CiAgICB9OwoKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLl9vblNjcm9sbCk7IC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhpcy5fb25IYXNoQ2hhbmdlKTsKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5fb25TY3JvbGwpOwogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCB0aGlzLl9vbkhhc2hDaGFuZ2UpOwogIH0sCiAgbWV0aG9kczogewogICAgb25TY3JvbGw6IGZ1bmN0aW9uIG9uU2Nyb2xsKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGlmIChpbml0VG9wID09PSB1bmRlZmluZWQpIHsKICAgICAgICBpbml0VG9wID0gZ2V0QWJzb2x1dGVUb3AodGhpcy4kZWwpOwogICAgICB9IC8vIHVwZGF0ZSBwb3NpdGlvbgoKCiAgICAgIHZhciBzY3JvbGxUb3AgPSBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCArIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7CiAgICAgIHZhciBoZWFkaW5ncyA9IHRoaXMuJHBhZ2UuaGVhZGVycyB8fCBbXTsgLy8gY2hhbmdlIGFjdGl2ZSB0b2Mgd2l0aCBzY3JvbGxpbmcKCiAgICAgIHZhciBpID0gMDsKCiAgICAgIHZhciBhZGRMaW5rID0gZnVuY3Rpb24gYWRkTGluayhpbmRleCkgewogICAgICAgIF90aGlzMi5hY3RpdmVJbmRleCA9IGluZGV4OwogICAgICB9OwoKICAgICAgZm9yICg7IGkgPCBoZWFkaW5ncy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBkb20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChoZWFkaW5nc1tpXS5zbHVnKTsKICAgICAgICB2YXIgdG9wID0gZ2V0QWJzb2x1dGVUb3AoZG9tKTsKCiAgICAgICAgaWYgKHRvcCAtIDUwIDwgc2Nyb2xsVG9wKSB7CiAgICAgICAgICBhZGRMaW5rKGkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoIWkpIGFkZExpbmsoaSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICB0cmlnZ2VyRXZ0OiBmdW5jdGlvbiB0cmlnZ2VyRXZ0KCkgewogICAgICB0aGlzLl9vblNjcm9sbCgpOwoKICAgICAgdGhpcy5fb25IYXNoQ2hhbmdlKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["D:/MyProduct/blog/node_modules/@vuepress/theme-blog/components/Toc.vue"],"names":["Sticker","initTop","getAbsoluteTop","dom","getBoundingClientRect","top","document","body","scrollTop","documentElement","components","data","activeIndex","computed","visible","$frontmatter","toc","$page","headers","length","watch","items","$refs","chairTocItem","rect","wrapperRect","$el","height","$route","mounted","syncVisible","$emit","$watch","setTimeout","triggerEvt","_onScroll","onScroll","_onHashChange","hash","decodeURIComponent","location","substring","index","findIndex","h","slug","getElementById","window","scrollTo","addEventListener","beforeDestroy","removeEventListener","methods","undefined","headings","i","addLink"],"mappings":"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","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Sticker from './Sticker.vue'\nlet initTop\n\n// get offset top\nfunction getAbsoluteTop(dom) {\n  return dom && dom.getBoundingClientRect\n    ? dom.getBoundingClientRect().top +\n        document.body.scrollTop +\n        document.documentElement.scrollTop\n    : 0\n}\n\nexport default {\n  components: {\n    Sticker,\n  },\n\n  data() {\n    return {\n      activeIndex: 0,\n    }\n  },\n\n  computed: {\n    visible() {\n      return (\n        this.$frontmatter &&\n        this.$frontmatter.toc !== false &&\n        !!(this.$page && this.$page.headers && this.$page.headers.length)\n      )\n    },\n  },\n\n  watch: {\n    activeIndex() {\n      const items = this.$refs.chairTocItem || []\n      const dom = items[this.activeIndex]\n      if (!dom) return\n      const rect = dom.getBoundingClientRect()\n      const wrapperRect = this.$el.getBoundingClientRect()\n      const top = rect.top - wrapperRect.top\n      if (top < 20) {\n        this.$el.scrollTop = this.$el.scrollTop + top - 20\n      } else if (top + rect.height > wrapperRect.height) {\n        this.$el.scrollTop += rect.top - (wrapperRect.height - rect.height)\n      }\n    },\n\n    $route() {},\n  },\n\n  mounted() {\n    // sync visible to parent component\n    const syncVisible = () => {\n      this.$emit('visible-change', this.visible)\n    }\n    syncVisible()\n    this.$watch('visible', syncVisible)\n\n    // binding event\n    setTimeout(() => this.triggerEvt(), 1000)\n\n    this._onScroll = () => this.onScroll()\n    this._onHashChange = () => {\n      const hash = decodeURIComponent(location.hash.substring(1))\n      const index = (this.$page.headers || []).findIndex(h => h.slug === hash)\n      if (index >= 0) this.activeIndex = index\n      const dom = hash && document.getElementById(hash)\n      if (dom) window.scrollTo(0, getAbsoluteTop(dom) - 20)\n    }\n    window.addEventListener('scroll', this._onScroll)\n    // window.addEventListener('hashchange', this._onHashChange);\n  },\n\n  beforeDestroy() {\n    window.removeEventListener('scroll', this._onScroll)\n    window.removeEventListener('hashchange', this._onHashChange)\n  },\n\n  methods: {\n    onScroll() {\n      if (initTop === undefined) {\n        initTop = getAbsoluteTop(this.$el)\n      }\n\n      // update position\n      const scrollTop =\n        document.body.scrollTop + document.documentElement.scrollTop\n      const headings = this.$page.headers || []\n\n      // change active toc with scrolling\n      let i = 0\n      const addLink = index => {\n        this.activeIndex = index\n      }\n\n      for (; i < headings.length; i++) {\n        const dom = document.getElementById(headings[i].slug)\n        const top = getAbsoluteTop(dom)\n        if (top - 50 < scrollTop) {\n          addLink(i)\n        } else {\n          if (!i) addLink(i)\n          break\n        }\n      }\n    },\n\n    triggerEvt() {\n      this._onScroll()\n      this._onHashChange()\n    },\n  },\n}\n"]}]}